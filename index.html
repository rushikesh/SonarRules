<html>

<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Rushikesh: Sonar Rules Explorer</title>
	<link rel="stylesheet" href="themes/conv.min.css" />
	<link rel="stylesheet" href="themes/jquery.mobile.icons.min.css" />
	<link rel="stylesheet" href="themes/jquery.mobile.structure-1.4.2.min.css" />
	<script src="themes/jquery-1.10.2.min.js"></script>
	<script src="themes/jquery.mobile-1.4.2.min.js"></script>
	<link rel="stylesheet" href="themes/css/animation.css">
	<style type="text/css">
		body.ui-mobile-viewport,
		div.ui-mobile-viewport,
		.ui-content {
			overflow-x: scroll;
			overflow-y: scroll;
		}

		.ui-body-a {
			background-color: #22282f;
		}

		.ui-title {
			margin: 0 1% !important;
		}

		.ui-panel-inner {
			position: absolute;
			top: 1px;
			left: 0;
			right: 0;
			bottom: 0px;
			overflow: auto;
			-webkit-overflow-scrolling: touch;
			background-color: #22282f;
			color: antiquewhite;
		}

		img.center {
			width: 100%;
			height: 100%;
			display: block;
			margin: 0 auto;
		}

		.hidden {
			display: none;
		}

		.svglogo,
		#bug,
		#vul,
		#sml {
			width: 17px;
			height: 17px;
			fill: aqua;
		}
	</style>
	<script type="text/javascript">
		var titleTxt = "Sonar Rules Explorer";
		$(document).ready(function () {
			$("#headerTitle").html(titleTxt);

			$.getJSON('js/languages.json', function (data) {
				$.each(data, function (i) {
					var li = document.createElement('li');
					var ele = document.createElement('a');
					ele.href = "#";
					ele.id = data[i].key;
					var cnt = getTotalRuleCount(data[i]);
					ele.innerHTML = data[i].name + "<span class='ui-li-count'>" + cnt + "</span>";
					$(li).append(ele);
					$("#qlist").append(li);
				});
				$('#qlist').listview().listview('refresh');
				$("#nav-panel").panel("open");
			});

			function getTotalRuleCount(data) {
				var sum = 0;
				for (var key in data.types) {
					if (data.types.hasOwnProperty(key))
						sum += data.types[key]
				}
				return sum;
			}

			$('#qlist').on('click', 'a', function () {
				$("#headerTitle").html(titleTxt + ' For ' + $(this).text().replace(/\d+/, ''));
				var fileName = $(this).attr('id');
				$.getJSON('js/' + fileName + '.json', function (data) {
					content = data;
					updateContent();
				});
				$("#nav-panel").panel("close");
			});

			$('#content').on('click', '#langRule a', function () {
				var id = $(this).attr('id');
				var rule = content.rules[id]
				var type = '';
				switch (rule.type) {
					case "Bug":
						type = "bug";
						break;
					case "Code Smell":
						type = "sml";
						break;
					case "Vulnerability":
						type = "vul";
						break;
					default:
						type = "bug";
				}
				$("#content2").text(rule.summary);
				$("#content2").append('<br/>');
				$("#content2").append('<svg viewBox="0 0 16 16" width="17px" height="17px"><use xlink:href="#' + type +
					'"  class="svglogo"></use></svg>');
				$("#content2").append('&nbsp;&nbsp;');
				$("#content2").append(rule.type);
				$("#content2").append('<span style="float:right">' + rule.defaultSeverity + '</span>');
				$("#content2").append('<br/>' + rule.description);
				$.mobile.navigate("#imgPage", {
					transition: "slide"
				});
			});


		});

		function updateContent() {
			var data = content.rules;
			var ul = document.createElement('ol');
			ul.id = "langRule";
			ul["data-role"] = "listview";
			$.each(data, function (i) {
				var li = document.createElement('li');
				var ele = document.createElement('a');
				ele.href = "#";
				ele.id = i;
				ele.innerText = data[i].summary;
				$(li).append(ele);
				$(ul).append(li);
			});
			$("#content").html(ul);
			$('#langRule').listview().listview('refresh');
		}
	</script>
</head>

<body>
	<svg xmlns="http://www.w3.org/2000/svg" class="hidden">
		<symbol id="bug" viewBox="0 0 16 16">
			<path d="M10.5,9.5h1.3l0.5,0.8L13,9.7l-0.7-1.2h-1.8V8.2l2-2.3V3.5h-1v2l-1,1.2V5.5h0C10.4,4.6,9.8,3.9,9,3.6l1.5-1.3 L9.8,1.5L8,3.2L6.2,1.5L5.5,2.3L7,3.6c-0.8,0.3-1.3,1-1.4,1.9h0v1.1l-1-1.2v-2h-1v2.3l2,2.3v0.3H3.7L3,9.7l0.8,0.5l0.5-0.8h1.3v0.3 l-2,1.9v2.8h1v-2.4l1-1c0,1.3,1.1,2.3,2.4,2.3h0.8c0.7,0,1.4-0.3,1.8-0.9c0.3-0.4,0.3-0.9,0.2-1.4l0.9,0.9v2.4h1v-2.8l-2-1.9V9.5z M8.5,11.5h-1v-5h1V11.5z"></path>
		</symbol>
	</svg>

	<svg xmlns="http://www.w3.org/2000/svg" class="hidden">
		<symbol id="vul" viewBox="0 0 16 16">
			<path d="M10.8,6.1H6V5c0-1.4,0.9-2.5,2-2.5c0.7,0,1.4,0.5,1.8,1.2C9.9,4,10.2,4.1,10.5,4s0.4-0.4,0.2-0.7 C10.2,2.2,9.2,1.5,8,1.5C6.4,1.5,5,3.1,5,5v1.2C3.9,6.2,3,7.2,3,8.3v4.4C3,14,4,15,5.2,15h5.6c1.2,0,2.2-1,2.2-2.2V8.3 C13,7.1,12,6.1,10.8,6.1z M8.6,11.6v1.2H7.4v-1.2c-0.6-0.2-1.1-0.8-1.1-1.6c0-0.9,0.7-1.7,1.7-1.7S9.7,9.1,9.7,10 C9.7,10.7,9.2,11.3,8.6,11.6z"></path>
		</symbol>
	</svg>

	<svg xmlns="http://www.w3.org/2000/svg" class="hidden">
		<symbol id="sml" viewBox="0 0 16 16">
			<path d="M8,2C4.7,2,2,4.7,2,8s2.7,6,6,6s6-2.7,6-6S11.3,2,8,2z M7.5,7.5h0.9v0.9H7.5V7.5z M3.7,7.7 c-0.1,0-0.2-0.1-0.2-0.2c0-0.4,0.1-1.2,0.6-2l0,0c0.5-0.8,1.2-1.3,1.5-1.5C5.8,4,5.9,4,5.9,4.1l1.3,2.3c0,0.1,0,0.2-0.1,0.2 C7,6.8,6.9,6.9,6.8,7.1C6.7,7.3,6.6,7.5,6.6,7.6c0,0.1-0.1,0.2-0.2,0.2L3.7,7.7z M9.9,12c-0.3,0.2-1.1,0.5-2,0.5h0 c-0.9,0-1.7-0.3-2-0.5c-0.1,0-0.1-0.2-0.1-0.3l1.3-2.3c0-0.1,0.1-0.1,0.2-0.1c0.2,0.1,0.3,0.1,0.5,0.1c0.2,0,0.4,0,0.5-0.1 c0.1,0,0.2,0,0.2,0.1l1.3,2.3C10,11.9,10,12,9.9,12z M12.4,7.9L9.7,8C9.6,8,9.5,7.9,9.5,7.8c0-0.2-0.1-0.4-0.2-0.5 C9.3,7.2,9.1,7,9,6.9C8.9,6.9,8.9,6.8,8.9,6.7l1.3-2.3c0.1-0.1,0.2-0.1,0.3-0.1c0.3,0.2,1,0.7,1.5,1.5l0,0c0.5,0.8,0.6,1.6,0.6,2 C12.6,7.8,12.5,7.9,12.4,7.9z"></path>
		</symbol>
	</svg>

	<div data-role="page" data-theme="a" id="page">
		<div data-role="header" data-position="fixed">
			<a href="#nav-panel" data-icon="bars" data-iconpos="notext">Menu</a>
			<a href="#popupBasic" data-position-to="window" data-transition="fade" data-rel="popup" id="infoicon" data-icon="info" class="ui-btn-right"
			  data-iconpos="notext">Info</a>
			<h1 id="headerTitle"></h1>
		</div>
		<div data-role="content" data-theme="a" id="content">

		</div>
		<div data-role="popup" id="popupBasic" data-overlay-theme="a" class="ui-content">
			<a href="#" data-rel="back" data-role="button" data-theme="a" data-icon="delete" data-iconpos="notext" class="ui-btn-right">Close</a>
			<p>Sonar Rules Explorer App.
			</p>
			<p>A handy app to keep your coding knowledge fresh and in compliance with best practices.
			</p>
			<p>Created By:
				<a href="http://www.rushis.com">Rushi</a>
			</p>
		</div>
		<div data-role="panel" data-position="left" data-position-fixed="true" data-display="overlay" id="nav-panel">
			<h2>Sonar</h2>
			<h4>Rules Explorer</h4>
			<ul id="qlist" data-role="listview" data-count-theme=b>

			</ul>
		</div>
	</div>

	<!-- Start of second page -->
	<div data-role="page" id="imgPage" class="cstmPage">
		<div data-role="header" data-position="fixed">
			<a href="#" data-rel="back" data-icon="arrow-l" data-role="button" data-theme="a" data-transition="slideUp" data-iconpos="notext">Back</a>
			<a href="#popupBasic1" data-position-to="window" data-transition="fade" data-rel="popup" id="infoicon2" data-icon="info"
			  class="ui-btn-right" data-iconpos="notext">Info</a>
			<h1 id="imgTitle"></h1>
		</div>
		<div data-role="popup" id="popupBasic1" data-overlay-theme="a" class="ui-content">
			<a href="#" data-rel="back" data-role="button" data-theme="a" data-icon="delete" data-iconpos="notext" class="ui-btn-right">Close</a>
			<p>Sonar Rules Explorer App.
			</p>
			<p>A handy app to keep your coding knowledge fresh and in compliance with best practices.
			</p>
			<p>Created By:
				<a href="http://www.rushis.com">Rushi</a>
			</p>
		</div>
		<div data-role="content" id="content2">
		</div>
	</div>
</body>

</html>